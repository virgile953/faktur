import{r,j as e}from"./index-CKBIMJ8Q.js";import{r as j,g as v,u as C}from"./components-DqBg-pzF.js";function f({isOpen:o,onClose:i,title:c,children:h,maxWidth:u="max-w-md"}){const n=r.useRef(null);r.useEffect(()=>{if(o){const s=document.body.style.overflow,l=window.scrollY;document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${l}px`,document.body.style.width="100%";const d=x=>{x.key==="Escape"&&i()};return document.addEventListener("keydown",d),n.current&&n.current.focus(),()=>{document.body.style.overflow=s,document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,l),document.removeEventListener("keydown",d)}}},[o,i]);const m=s=>{s.target===s.currentTarget&&i()};if(!o)return null;const a=e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:m,children:e.jsxs("div",{ref:n,className:`bg-gray-800 p-6 rounded-lg ${u} w-full mx-4 max-h-[90vh] overflow-y-auto`,tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{id:"modal-title",className:"text-xl font-bold",children:c}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-white text-2xl leading-none","aria-label":"Close modal",children:"Ã—"})]}),h]})});return typeof document<"u"?j.createPortal(a,document.body):null}function N({clients:o}){const[i,c]=r.useState(!1),[h,u]=r.useState(!1),[n,m]=r.useState(null),[a,s]=r.useState({name:"",email:"",phone:"",address:""}),[l,d]=r.useState({name:"",email:"",phone:"",address:""}),x=v(),g=t=>{m(t),d({name:t.name,email:t.email,phone:t.phone,address:t.address}),u(!0)},y=()=>{x.submit({action:"create",...a},{method:"POST"}),s({name:"",email:"",phone:"",address:""}),c(!1)},b=()=>{n&&(x.submit({action:"update",id:n.id.toString(),...l},{method:"POST"}),u(!1),m(null))},w=t=>{confirm("Are you sure you want to delete this client?")&&x.submit({action:"delete",id:t.toString()},{method:"POST"})};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{isOpen:h,onClose:()=>{u(!1),m(null)},title:`Edit Client: ${(n==null?void 0:n.name)||""}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Client Name",value:l.name,onChange:t=>d({...l,name:t.target.value}),className:"w-full p-2 bg-gray-700 rounded"}),e.jsx("input",{type:"email",placeholder:"Email",value:l.email,onChange:t=>d({...l,email:t.target.value}),className:"w-full p-2 bg-gray-700 rounded"}),e.jsx("input",{type:"tel",placeholder:"Phone",value:l.phone,onChange:t=>d({...l,phone:t.target.value}),className:"w-full p-2 bg-gray-700 rounded"}),e.jsx("textarea",{placeholder:"Address",value:l.address,onChange:t=>d({...l,address:t.target.value}),className:"w-full p-2 bg-gray-700 rounded",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>u(!1),className:"bg-gray-600 text-white px-4 py-2 rounded",children:"Cancel"}),e.jsx("button",{onClick:b,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Save"})]})]}),e.jsxs(f,{isOpen:i,onClose:()=>c(!1),title:"New Client",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Client Name",value:a.name,onChange:t=>s({...a,name:t.target.value}),className:"w-full p-2 bg-gray-700 rounded"}),e.jsx("input",{type:"email",placeholder:"Email",value:a.email,onChange:t=>s({...a,email:t.target.value}),className:"w-full p-2 bg-gray-700 rounded"}),e.jsx("input",{type:"tel",placeholder:"Phone",value:a.phone,onChange:t=>s({...a,phone:t.target.value}),className:"w-full p-2 bg-gray-700 rounded"}),e.jsx("textarea",{placeholder:"Address",value:a.address,onChange:t=>s({...a,address:t.target.value}),className:"w-full p-2 bg-gray-700 rounded",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"bg-gray-600 text-white px-4 py-2 rounded",children:"Cancel"}),e.jsx("button",{onClick:y,className:"bg-green-500 text-white px-4 py-2 rounded",children:"Create"})]})]}),e.jsxs("div",{className:" mt-[130px] p-4 w-full max-w-7xl mx-auto flex flex-col gap-8 items-center justify-center border border-gray-700 rounded-lg",children:[e.jsx("div",{className:"flex flex-row justify-between w-full",children:e.jsx("button",{onClick:()=>c(!0),className:"bg-blue-500 text-white px-4 py-2 rounded",children:"New Client"})}),o.map(t=>e.jsxs("div",{className:"p-4 border-b border-gray-700 w-full",children:[e.jsx("h2",{className:"text-xl font-bold",children:t.name}),e.jsxs("p",{children:["Email: ",t.email]}),e.jsxs("p",{children:["Phone: ",t.phone]}),e.jsxs("p",{children:["Address: ",t.address]}),t.prints&&t.prints.length>0?e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Prints:"}),e.jsx("ul",{children:t.prints.map(p=>e.jsxs("li",{className:"mt-1",children:[p.name," -"," ",new Date(p.date).toLocaleDateString("fr-FR")]},p.id))})]}):null,e.jsxs("div",{className:"flex flex-row gap-2 mt-4",children:[e.jsx("button",{onClick:()=>g(t),className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>w(t.id),className:"bg-red-500 text-white px-4 py-2 rounded",children:"Delete"})]})]},t.id))]})]})}const S=()=>[{title:"Clients"},{name:"Clients",content:"List of clients"}];function O(){const{clients:o}=C();return e.jsx(e.Fragment,{children:e.jsx(N,{clients:o})})}export{O as default,S as meta};
